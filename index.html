<!DOCTYPE html>
<html>

  <head>
    <meta charset='utf-8' />
    <meta http-equiv="X-UA-Compatible" content="chrome=1" />
    <meta name="description" content="Ajax captcha - Antibot JeSurveille : " />

    <link rel="stylesheet" type="text/css" media="screen" href="stylesheets/stylesheet.css">
  <script type="text/javascript" src="http://jesurveille.fr/latest-jquery/jquery-1.5.1.min.js"></script>
	<script type="text/javascript" src="http://jesurveille.fr/latest-jquery-ui/jquery-ui.min.js"></script>
	<script type="text/javascript" src="http://jesurveille.fr/captcha/jquery.captcha.js"></script>
	<link href="http://jesurveille.fr/captcha/captcha.css" rel="stylesheet" type="text/css" />
    <title>Ajax captcha - Antibot JeSurveille</title>
  </head>

  <body>

    <!-- HEADER -->
    <div id="header_wrap" class="outer">
        <header class="inner">
          <a id="forkme_banner" href="https://github.com/patrocle/Ajax-captcha---Anti-bot---JeSurveille">Fork Me on GitHub</a>

          <h1 id="project_title">Ajax captcha - Antibot JeSurveille</h1>
          <h2 id="project_tagline"></h2>

          <section id="downloads">
            <a class="zip_download_link" href="https://github.com/patrocle/Ajax-captcha---Anti-bot---JeSurveille/zipball/master">Download this project as a .zip file</a>
            <a class="tar_download_link" href="https://github.com/patrocle/Ajax-captcha---Anti-bot---JeSurveille/tarball/master">Download this project as a tar.gz file</a>
          </section>
        </header>
    </div>

    <!-- MAIN CONTENT -->
    <div id="main_content_wrap" class="outer">
      <section id="main_content" class="inner">
        <h1>Ajax Captcha - Drag and drop </h1>

<h2>JeSurveille</h2>

<p>Ce captcha genere une image qui decrit une icone parmis 5 presente, Il faut deplacer ( drag and drop ) cette icone dans l'endroit indiqué.
<a href="http://jesurveille.fr/anti-bot/">http://jesurveille.fr/anti-bot/</a></p>
<!-- Exemple de formulaire -->  
<form method="post" id="form">
	<!-- Début du Captcha captcha -->	
	<div class="captcha-container">
    	You must enable javascript to see captcha here!
    	<div id='captcha-bottom'><a href='http://www.jesurveille.fr'>Je Surveille</a> - AntiBot<br> <img src="http://jesurveille.fr/captcha/imgs/MainScreen.png" alt="ajax captcha php source"></div>
   	</div>
	<!-- Fin du Captcha -->
	<p><input id="submit" type="button" name="submit" value="Envoyer" /></p>
</form>
<!-- Fin de l'exemple -->


<h3>Requis</h3>

<ul>
<li>jQuery Version &gt;= 1.5</li>
<li>PHP Version &gt;= 5.2</li>
<li>Bibliotheque GD</li>
</ul>
      </section>
    </div>

    <!-- FOOTER  -->
    <div id="footer_wrap" class="outer">
      <footer class="inner">
        <p class="copyright">Ajax captcha - Antibot JeSurveille maintained by <a href="https://github.com/patrocle">patrocle</a></p>
        <p>Published with <a href="http://pages.github.com">GitHub Pages</a></p>
      </footer>
    </div>

    <script type="text/javascript" charset="utf-8">
$(function() {
  	  $.ajax({
  							type: "POST",
  							url:"http://jesurveille.fr/captcha/captcha.php",
  							data: "type=refreshKey",
  							cache: false,
  							success: function(json){
							
  								$(".captcha-container").captcha({
									key_image:json.img,
									key_picto:json.picto
								});
  							}
 						});	
			
			$('#submit').click( function(event) {
				$.ajax({
  					type: "POST",
  					url: "http://jesurveille.fr/captcha/exemple.php",
  					data: $('#form').serialize(),
  					cache: false,
  					success: function(retour){
						alert (retour);
							var url ="http://jesurveille.fr/captcha/captcha.php";
						$.ajax({
  							type: "POST",
  							url: url,
  							data: "type=refreshKey",
  							cache: false,
  							success: function(json){
								$('.captcha-left').empty();
  								$(".captcha-container").captcha({
									key_image:json.img,
									key_picto:json.picto
								});
  							}
 						});	
  					}
 				});	
			});
		});	
    </script>
  </body>
</html>
